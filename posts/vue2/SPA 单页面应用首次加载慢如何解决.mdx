---
title: SPA 单页面应用首次加载慢如何解决
date: 2023-12-20
category: Vue2
---

# 单页面应用首次加载慢的原因

由于单页面应用首次加载项目时 需要加载所有的静态资源 通常是使用 webpack 等打包工具打包出的 dist 文件夹下所有内容 包括 js、 css、 html、图片等 如果dist文件很大 首次加载下载资源就会很慢 并且单页面应用是只有当资源文件下载完成以后才开始渲染首屏 所以当资源过大时 项目浪费了大量时间在资源下载上 看起来加载就会很慢 实际渲染时间可能几百毫秒就渲染完成了

# 如何解决单页面应用首次加载慢

1. 对静态文件进行压缩 比如图片类的资源 在打包时使用一些压缩插件进行压缩
2. 使用打包工具打包时开启 gzip 对代码进行压缩 在部署项目时 nginx 也需要开启 gzip 大部分压缩过的代码可以压缩 20 倍以上
3. 对项目的路由组件采用懒加载的方式 采用懒加载就会在使用到组件时再进行加载 入口文件打包出来就会小很多 <a href="https://v3.router.vuejs.org/zh/guide/advanced/lazy-loading.html" target="_blank"> 路由懒加载</a>
4. 对一些有稳定 cdn 的插件库 比如 UI 组件库等 可以使用在线 cdn 进行引入 就不需要打包在自己的项目里
5. 对UI组件库进行合理的按需引入 仅仅打包引入项目中使用到的UI组件

**当用户等待时间不长 也不短时可以做的加载优化**

1. 在加载时 为项目增加加载动画 比如 loading 动画、骨架屏等 让用户在等到资源加载完成时 有一定的视觉上的反馈

!!! success TIPS
在小项目中遇到首屏加载慢的时候 只需要开启 gzip 就很快了 大项目可能还会涉及到treeShaking 字面意思是摇树 引申意义就是通过摇晃把树叶给摇掉 减轻树的负担 因为ES6模块化的机制 项目可以在我们打包时通过判断模块是否被导入引用了 从而找到没有使用过的一些模块 打包时不打包那部分的代码 可以减少无用代码
我们现在很多插件 可以在我们编码时进行代码的校验，可以提醒我们引入的方法是否被使用了(eslint 之类的) 很多新的脚手架也自动帮我们treeShaking了 这个了解就行
!!!
