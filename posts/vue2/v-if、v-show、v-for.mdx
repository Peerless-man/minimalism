---
title: v-if、v-show、v-for
date: 2023-12-12
category: Vue2
---

!!! note TIPS
整篇都是重点
!!!

## v-if 和 v-show 的区别

v-if v-if 是惰性的 通过控制是否渲染元素来对元素进行显示与隐藏 对于一些切换少 并且可能会不渲染的元素来说 使用 v-if 会更好

v-show 通过控制元素样式 display 来控制元素的显示与隐藏 适合频繁切换 只在第一次渲染时消耗性能 但是他的缺点是不管有没有数据这个 dom 它都会渲染(可能这个组件的定义就是有数据才显示 没数据就不展示) 对于这种情况就会避免不必要的渲染 v-if 是更好的选择

## v-if 和 v-for 的优先级

v-if 的优先级是低于 v-for 的 所以 v-if 和 v-for 一起使用时 会将列表先渲染出来 再通过 v-if 判断当前的列表项的显隐 本来不不需要渲染的一行 还被渲染出来又被 v-if 销毁掉 就会造成性能的浪费

问：为什么 v-if 和 v-for 不建议连用

> 答：因为 v-for 的优先级高于 v-if 所以会先渲染出来列表 再通过 v-if 判断是否渲染 造成了不必要的渲染

问：我们可以怎么避免 v-if 和 v-for 连用

> 答：我们遇到这个情况的时候 可以在获取到数据的时候对数据进行循环过滤 然后再使用 v-for 来渲染

## v-for 中为什么要使用 key

通常在使用 v-for 时 我们都会绑定一个 key 值 并且绑定的是唯一值 因为当数据变化时 diff 算法 在有 key 时 可以通过对比唯一的 key 来判断元素是否可以复用(有些时候仅仅只是元素顺序发生了变化) 内容变化也可以对比相同key的元素 从而进行精准的更新 如果没有 key 值 vue 就不知道具体是哪个元素发生了变化 当没有key 时 vue 无法知道是哪个元素进行了更新 可能会从头到尾对比一遍 本来只需要将两个元素交换位置 实际上可能会依次移动大部分元素 把新生成的元素插入指定位置 就会发生偏移 所以不使用 key 的话会影响 diff 算法的效率

问：为什么不推荐 index 下标作为 key

> 答：因为在数组里 当数组内的某一项发生变化时 可能会因为这一项导致整个数组的 key 发生变化 导致 dom 全部重新渲染 浪费性能

小知识

v-if 可以单独使用 但 v-else、v-else-if 需要搭配 v-if 才能使用
