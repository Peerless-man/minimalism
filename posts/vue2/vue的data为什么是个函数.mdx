---
title: Vue的data为什么是个函数
date: 2023-12-11
category: Vue2
---

# 闭包

闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数）。在本质上，闭包是将函数内部和函数外部连接起来的桥梁。

通俗易懂的说法

> 闭包就是当你想调用一个函数A，你无法马上调用函数A，而要先调用另一个函数B，函数B的返回值才是函数A。闭包就是关于为什么要这样做以及怎么做到的问题。

# 为什么要使用闭包

当我们需要在多个地方使用到同一个变量时 直接声明全局变量是很多人的做法 但是这个做法有可能导致用户操作一次这个变量以后 其他地方使用到这个变量的地方 数据也会发生改变
我们可以使用闭包来隔离这些变量、函数 比如在函数内部声明一些变量、操作这些变量的一些函数并导出 在其他地方解构出这个函数内的变量、方法对数据进行操作
函数内部的变量、方法在函数作用域内 每次调用这个函数 它都会返回一份独立的数据对象 没有必要担心它们之间会像全局变量那样被污染 使用闭包可以减少程序因变量污染的问题

还有个小知识是 函数一旦运行了 内部的变量、方法就会等到程序整体退出才会被回收 可以通过这个方法来延长变量的生命 程序的公共状态就是用类似的方法做的

问：vue2为什么data是个函数

答：vue2的特点之一是组件化思想 组件的特点就是可复用 如果在很多地方都使用了这个组件 但是这个组件的数据是共享的 那么肯定会出现相同组件之间互相干扰的情况
所以把data属性定义为一个函数 确保了每个组件都有独立的数据对象 可以避免数据共享的问题

# 参考

[1] <a href="https://blog.csdn.net/u010990854/article/details/124567064" target="_blank">Javascript闭包的理解</a>
