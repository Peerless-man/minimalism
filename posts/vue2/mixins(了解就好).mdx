---
title: mixins
menuTitle: mixins(了解就好)
date: 2023-12-20
category: Vue2
---

# mixins 是什么

官方解释：混入 (mixin) 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能。一个混入对象可以包含任意组件选项。当组件使用混入对象时，所有混入对象的选项将被“混合”进入该组件本身的选项。

通俗易懂的解释：当许多组件中有一部分逻辑是一模一样的时候 可以将公共逻辑或配置提取出来 哪个组件需要用到时 将这部分代码混入到这个组件即可 提取的是逻辑和配置 不是 css 和 html

# mixins 和 vueX 的区别

mixins 通常用于组件间公共逻辑配置的抽离 通过写组件时 将公共逻辑混入进去 但是每次引入的 mixins 和其他组件引入的 mixins 虽然是同一段代码 却是各自独立工作的 数据不共享

vuxX 用于管理组件间会使用到的公共状态 状态间是共享的 在每个组件中也能修改公共的状态

# mixins 使用方法

```js
// 定义一个 mixin 对象
const myMixin = {
	created: function () {
		this.hello()
	},
	methods: {
		hello: function () {
			console.log('hello from mixin!')
		},
	},
}

// 在其他组件引入

new Vue({
	mixins: [myMixin],
	data: function () {
		return {}
	},
})

// 组件初始化时会将mixins中的生命周期钩子 和 组件自己的生命周期钩子进行合并 然后依次执行
// 我们可以看到组件会打印 hello from mixin!
```

# 问答环节

问：mixins 的好处、坏处

> 答：好处：1、提高代码复用性 2、维护起来方便 修改一次即可同步到所有使用到的地方
> 坏处：1、命名需要慎重 因为合并选项后可能导致命名冲突 2、如果是新手不知道 mixins 的使用 可能会不知道 mixins 中混入了代码 排查起来会相对困难 3、滥用 mixins 的话 代码对每个组件的影响可能不同 不好维护

# 我遇到的一些实用场景

在响应式布局的项目中 可能会遇到移动端和 PC 端随意切换的情况 如果我们每个页面都通过 添加事件去判断屏幕大小 就会写很多不必要的代码 我们可以在全局根组件上写好屏幕变化的监测方法 将屏幕大小的数据存入 store 通过写一个全局的 mixins 在里面获取 store 中的屏幕大小 写一些计算设备的函数 返回当前设备 虽然只是一个小小的优化 但是我在全局引入后就不用去每个组件重新引入 store 获取屏幕大小判断 还有一些公共逻辑的话也可以在这里面加 不过要注意命名 不要冲突了
